<!DOCTYPE html>
<html>
<head>
    <title>TITLE</title>

    <!-- meta information -->
    <meta name="author" content="Torsten Schrade" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- favicons -->
    <link rel="shortcut icon" href="resources/img/favicon.png" />
    <link rel="apple-touch-icon" href="resources/img/apple-touch-icon.png" />

    <!-- CSS reset and grid -->
    <link href="vendor/normalize/normalize-4.1.1.css" rel="stylesheet" />
    <link href="vendor/skeleton/skeleton-2.0.4.css" rel="stylesheet" />

    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,600,600italic,400italic,700italic,800,800italic&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css" />

    <!-- styles for included libraries -->

    <!-- chartist -->
    <link rel="stylesheet" href="vendor/chartist/chartist.min-0.9.7.css" />

    <!-- codemirror -->
    <link rel="stylesheet" href="vendor/codemirror/lib/codemirror.css" />

    <!-- highlight -->
    <link rel="stylesheet" href="vendor/highlight/styles/default.css" />
    <link rel="stylesheet" href="resources/css/hljs.linenumbering.css" />

    <!-- magnific popup -->
    <link rel="stylesheet" href="vendor/magnific-popup/magnific-popup-1.1.0.css" />

    <!-- standard presentation styles -->
    <link href="resources/css/style.css" rel="stylesheet" />

    <!-- custom presentation styles -->
    <link href="resources/css/custom.css" rel="stylesheet" />

    <!-- js needed in head -->

    <!-- greuler -->
    <script src="vendor/d3/d3-3.5.6.js"></script>
    <script src="vendor/cola/cola.v3.min.js"></script>
    <script src="vendor/greuler/greuler-0.5.5.min.js"></script>

    <!-- html5 dataset shim for IE -->
    <script src="vendor/impress/html5-dataset.js" type="text/javascript"></script>
</head>

<body>

    <div id="impress">

        <div class="step">
            <h4><strong>21.10.2017</strong> | <a href="#">Dublin</a></h4>
            <h4><strong>PyCon</strong></h4>

            <h1 class="down-100">Monadic error handling</h1>

            <h2 class="red up-25">in python</h2>

            <h4 class="down-100">
                <strong>Slides:</strong>
                <a href="https://przemyslawjanpietrzak.github.io/impress/e2e-tests-in-python/index.html" title="View the presentation online">
                    Link
                </a>
            </h4>

            <h5>
                <strong><a href="#">Author</a></strong> |
                <img src="resources/img/Twitter_bird_logo_2012.svg" alt="Twitter" class="twitter-icon" />
                <a href="https://twitter.com/przemyslawjanp" title="Digital Academy on Twitter">@przemyslawjanp</a> |
                <img src="resources/img/Octicons-mark-github.svg" alt="Twitter" class="gh-icon" />
                <a href="https://github.com/przemyslawjanpietrzak" title="Digital Academy on GitHub">przemyslawjanpietrzak</a>
            </h5>
        </div>

        <div class="step">
            <div class="row">
                <div class="four columns">
                    <img src="resources/img/fs.jpg" />
                </div>
                <div class="four columns">
                    <img src="resources/img/pylady.png" />
                </div>
                <div class="four columns">
                    <img src="resources/img/itepe.svg" />
                </div>
            </div>
        </div>

        <div class="step">
            <h2>Me</h2>
            <div class="row">
                <div class="three columns">
                    <img src="resources/img/python1.png" />
                </div>
                <div class="three columns">
                    <img src="resources/img/js.png" />
                </div>
                <div class="three columns">
                    <img src="resources/img/golang.png" />
                </div>
                <div class="three columns">
                    <img src="resources/img/scala.png" />
                </div>
            </div>
        </div>
        <div class="step">
            <h2>Classic error handling</h2>
<pre>
<code class="python">def do():
    if err
        raise MyCustomException
    return data
</code>
</pre>

<pre>
<code class="python">try:
    data = do()
    handle(data)
except MyCustomException as e:
    handle(e)
</code>
</pre>


        </div>

                <div class="step">
            <h2>Later</h2>
<pre>
<code class="python">def do():
    if err
        raise MyCustomException
    elif other_err:
        raise MyAnotherCustomException
    return data
</code>
</pre>

<pre>
<code class="python">try:
    data = do()
    handle(data)
except MyCustomException as e:
    handle(e)
except MyAnotherCustomException as e:
    handle(e)
</code>
</pre>




        </div>

        <div class="step">
            <h2>Something simpler?&nbsp;<img style="height: 89px;margin-left: -30px;width: 112px;margin-bottom: -26px;" src="resources/img/golang.png"></h2>

<pre>
<code class="go">f, err := os.Open("filename.ext")
if err != nil {
    log.Fatal(err)
}
// do something with the open *File f:
</code>
</pre>


<pre>
<code class="go">_, err := os.Create("/tmp/file")
if err != nil {
    panic(err)
}
</code>
</pre>
        </div>

        <div class="step">
            <h2>Scala time&nbsp;<img style="height: 89px;margin-left: -13px;width: 81px;margin-bottom: -26px;" src="resources/img/scala.png"></h2>
<pre>
<code class="scala">val in = Console.readLine("Type Either a string or an Int: ")
val result: Either[String, Int] = try {
    Right(in.toInt)
  } catch {
    case e: Exception =>
      Left(in)
}

println(result match {
  case Right(x) => "Success :)"
  case Left(x)  => "Error :("
})
</code>
</pre>
        </div>

                <div class="step">
            <h2>And how to do in Python?</h2>
<pre>
<code class="python">from pymonet.either import Left, Right

def divide(divided, divider):
    if divider == 0:
        return Left('can not divide by 0')
    return Right(divided, divider)

def handle_error(value):
    print ('error {}'.format(value))

def handle_success(value):
    print ('success {}'.format(value))

divide(42, 0)
    .map(lambda value: value + 1)
    .case(error=handle_error, success=handle_success)
# error can not divide by 0

divide(42, 1)
    .map(identity, lambda value: value + 1)
    .case(error=handle_error, success=handle_success)
# success 43
</code>
</pre>
        </div>

                       <div class="step">
            <h2>Let's go deeper</h2>
<pre>
<code class="python">from pymonet.either import Left, Right

divide(42, 1)
    .map(lambda value: value + 1)
    .fold(lambda value: divide(42, value))
    .case(error=handle_error, success=handle_success)
# success 1

</code>
</pre>

                           <pre>
<code class="python">map(self, mapper: (A) -> B): Either[B]
fold(self, mapper: (A) -> Either[B]): Either[B]
</code>
</pre>
        </div>


                       <div class="step">
            <h2>Some monad for absence ... Maybe?</h2>
<pre>
<code class="python">from pymonet.Maybe import Maybe

def fins_something(item):
    if item in special_list:
        return Maybe.just(item)
    return Maybe.nothing()

fins_something(42).get_or_else(0)  # 42
fins_something(41).get_or_else(0)  # 0

</code>
</pre>
       </div>

     <div class="step">
        <h2>Laziness</h2>

<pre>
<code class="python">from pymonet.applicative import Applicative

def fn():
    print('fn call')
    return 42

def mapper(value):
    print('mapper side effect of ' + value)
    return value + 1

def side_effect(value):
    print('side effect of ' + value)

applicative = Applicative(fn)
mapped_applicative = applicative.map(mapper)
mapped_applicative.fold(side_effect)
# fn call
# mapper side effect of 42
# side effect of 42
</code>
</pre>

      </div>
      <div class="step">
<pre>
<code class="python">from pymonet.task import Task

def resolvable_fn(reject, resolve):
    print('resolve side effect')
    resolve(42)

def rejectable_fn(reject, resolve):
    print('reject side effect')
    reject(0)

resolvable_task = Task.of(resolvable_fn)
rejectable_task = Task.of(rejectable_fn)

def mapper(value):
  print('mapper side effect ' + value)
  return value + 1

resolvable_task.fold(mapper)
# resolve side effect
# mapper side effect 42

rejectable_task.fold(mapper)
# reject side effect
</code>
</pre>




        </div>

        <div class="step">
            <h2>Why?</h2>
            <ol class="line-height-one-five">
                <li class="substep">Less exceptions</li>
                <li class="substep">More modular</li>
                <li class="substep">More testable</li>
            </ol>
        </div>

        <div class="step">
            <div class="centered">
                <h1>THE&nbsp;&nbsp;END</h1>
                <h2>Thank you :*</h2>
            </div>
        </div>

    </div>

    <!-- jquery -->
    <script src="vendor/jquery/jquery-1.11.0.min.js"></script>

    <!-- chartist -->
    <script src="vendor/chartist/chartist.min-0.9.7.js"></script>
    <script src="resources/js/chartist.charts.js"></script>

    <!-- codemirror -->
    <script src="vendor/codemirror/lib/codemirror.js"></script>
    <script src="vendor/codemirror/addon/edit/matchbrackets.js"></script>
    <script src="vendor/codemirror/mode/sparql/sparql.js"></script>
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("sparql"), {
            mode: "application/sparql-query",
            matchBrackets: true,
            lineNumbers: true,
            viewportMargin: Infinity
        });
    </script>

    <!-- highlight -->
    <script src="vendor/highlight/highlight.pack-9.3.0.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="resources/js/hljs.linenumbering.js"></script>

    <!-- magnific popup -->
    <script src="vendor/magnific-popup/jquery.magnific-popup.min-1.1.0.js"></script>
    <script src="resources/js/magnific-popup.lightbox.js"></script>

    <!-- impress.mod.js -->
    <script src="vendor/impress/impress.fork.js"></script>
    <script src="vendor/impress/impress-slidenum.js"></script>
    <script>
        var obj = impress();
        obj.init();
        initSlideNo(obj);
    </script>

</body>
</html>
